\textbf{Регистр}~--- набор из n устройств, способный хранить n"=разрядное 
двоичное число. \bigskip

\textbf{Оперативная память} состоит из байтов, байт состоит из 8 информациионых 
битов"=разрядов, разряды с 0 по 3 называются цифровой частью байта, а с 
4 по 7 зонной частью байта. \bigskip

\textbf{Оперативная память} 32-х разрядного процессора может достигать 4Гб с
адресами от 0 до $2^{32-1}$, что в 16"=ричной системе счисления записывается
от 00000000 до FFFFFFFF. \bigskip

\textbf{Байты} могут объединяться в поля фиксированной и переменной длины.
Адресом поля является адрес младшего байта, входящего в поле.
Длина поля~--- количество байтов, входящих в поле.
Поля фиксированной длины имеют собственные имена. Слово состоит
из 2"=х байтов, двойное слово из 4"=х байтов. Поля переменной длины могут
начинаться с любого байта. \bigskip

\textbf{Процессор} может работать с непрерывной и сегментированной памятью.
Если память сегментированна, то физический адрес байта состоит из 2"=х
частей: <сегмент>:<смещение>. И получается он по формуле: адрес начала
сегмента + исполняемый адрес. \bigskip

\textbf{Смещение}~--- исполняемый адрес, который формируется в зависимости от способа
адресации операндов. В защищённом режиме может быть определено до 16083
сегметов, размером до 4Гб, процессор может обработать 64Тб виртуальной памяти.
\bigskip

\textbf{В реальном режиме} старшие 4 цифры адреса начала сегмента хранятся в сегментном
регистре, адрес сегмента кратен 16, поэтому физический адрес получается
смещением содержимого сегментного регистра на 4 разряда (двоичных)
влево и прибавлением к нему исполняемого адреса. \bigskip

\textbf{Физический адрес} следующей исполняемой команды получается: содержимое регистра
CS, смещённое на 4 разряда + IP. \smallskip
\textbf{Пример:}\smallskip

ФА = (CS) + (IP)

(CS) =$7A15_{16}$ = 0111 1010 0001 0101 $0000_2$

(IP) = $C7D9_{16}$ = 1100 0111 1101 $1001_2$

ФА = $86929_{16}$ = 1000 0110 1001 0010 $1001_2$

\begin{center}
    \large{\textbf{Форматы данных}}
\end{center}

\textbf{Рассматриваемый нами процессор} может обрабатывать целые числа без знака,
целые числа со знаком, действительные числа с плавающей точкой, 
двоично"=десятичные числа, символы, строки и указатели. \bigskip

\textbf{Целое число без знака} может занимать байт, слово или двойное слово и
изменяться от 0 до 255(байт), от 0 до 65535(слово) и от 0 до
4294967295(двойное слово).\bigskip

\textbf{Целое число со знаком} может занимать байт, слово или двойное слово
при этом старший разряд (7(байт), 15(слово) или 31(двойное слово))
отводится под знак числа (0 полодительной, 1 отрицательное), остальные
разряды под цифры числа.\bigskip

\textbf{Цифры со знаком} хранятся в дополнительном коде, дополнительный код
положительного числа равен числу, а дополнительный код отрицательного числа
может быть вычислен по формуле: $10^n - |x|$.\smallskip 

\textbf{Например}, представим
в слове отрицательное число -AC7 $(10^4 - AC7 = F539)$.\bigskip

\textbf{Дополнительный код} двоичного числа можно получить инверсией разрядов
и прибавленем 1 к младшему разряду.\smallskip

\textbf{Например}, -12 (в байте)
$(12 = 11110100)$\bigskip

\textbf{Вычитание в машине:} дополнительный код уменьшаемого прибавляется к вычитаемому,
чтобы получить 65-42 = 23


1) 65 = 0100 0001

2) -42 = 1101 0110 

3) 65 +(-42) = 0100 0001 + 1101 0110 \bigskip

\textbf{Число с плавающей точкой} может занимать 32 разряда, 64 разряда или
80 разрядов, и называется оно короткое вещественное, длинное вещественное и
рабочее вещественное.\bigskip

\textbf{Число с плавающей точкой} состоит из 3"=х частей: знак (1 разряд), 
машиный порядок (8(если в общем число занимает32 разряда) или 11(64 разряда), или 15(80 разрядов)
разрядов), мантисса (23(32 разряда) или 52(64 разряда),
или 64(80 разрядов) разряда).\bigskip

\textbf{Машинный порядок} не явным образом содержит в себе знак порядка, он
изменяется от всех 0 до всех 1, в поле, которое ему определено, а с истинным
порядком машинный порядок связан формулой: 

Пм = Пи + $127_{10} (1023_{10}, 16383_{10})$ \bigskip

\begin{center}
    \includegraphics[width=100mm]{2_1.png}
\end{center}

1) переведём в 16"=ричное

2) нормализуем число

3) получаем машинный порядок

4) записываем в разрядную сетку, но хитрость заключается в том, что для
экономии памяти старшая цифра мантиссы нормализованного числа не записывается
в разрядную сетку (т.к. она равна 1(вроде всегда)) \bigskip


\textbf{Двоично"=десятичные чисал} могут обрабатываться процессором как 8"=ми
разрядные в упакованном или неупакованном формате, а сопроцессором могут
обрабатываться 80"=ти разрядные в упакованном формате. \bigskip

\textbf{Упакованный формат} предполагает хранение 2"=х цифр в байте, а неупакованный
только 1 цифры в цифровой части байта. \bigskip

\textbf{Символьные данные} хранятся в ASCII коде, каждому символу отводится 1 байт
памяти. \bigskip

\textbf{Строковые данные}~--- это последовательности байтов, слов или двойных слов
и указатели. Существует два типа указателей: длинный 
(48 разрядов селектор(16) + смещение(32)) и коротки (32 разряда).

\begin{center}
    \large{\textbf{Форматы команд}}
\end{center}

\textbf{В машинном формате команда}~--- последовательность двоичных цифр, состоящая 
изменяется двух частей, определяющих код операции и адресную часть, то есть
где хранятся данные и куда можно записать результат.\bigskip

\textbf{Рассматриваемый процессор может работать} с безадресными командами, с
одноадресными командами, двухадресными и трёхадресными командами.
В памяти команда может занимать от 1 до 15 байтов в зависимости от кода 
операции количество операндов и места их расположения. А располагаться
операнды могут непосредственно в команде, в регистрах или в оперативной
памяти. \bigskip

\textbf{Наибольшее количество команд} двухадресных и тогда формат называют:
R"=R, M"=M, R"=M, M"=R, R"=D, M"=D.\bigskip

\textbf{Существуют различные способы адресации} операторов, а данные могут занимать
байт, слово или двойное слово. И исполняемый адрес операнда зависит от 
способа адресации и может сотоять из трёх частей (база, индекс и смещение).
Например, [BX][SI]M \bigskip

\textbf{Способы адресации (в реальном режиме):}

1) регистровая,

2) непосредственная,

3) прямая,

4)косвенно"=регистровая,

5) по базе со смещением,

6) прямая с индексированием,

7) по базе с индексированием.

\begin{center}
    \includegraphics[width=120mm]{2_2.png}
\end{center}

\begin{center}
    \includegraphics[width=120mm]{2_3.png}
\end{center}

\begin{center}
    \includegraphics[width=100mm]{2_4.png}
\end{center}

\textbf{В ассемблере} результат всегда посылается по адресу первого операнда.
\bigskip

\textbf{Адресация регистровая:}\smallskip

MOV AX, BX ;$(BX) \to AX$

\includegraphics[width=80mm]{2_5.png}

\textbf{Непосредственная адресация:}\smallskip

MOV AX,25 ; $25 \to AX$\bigskip

\textbf{В ассемблере как и в языках  высокого уровня} есть именованные константы, они 
определяются с помощью EQU \smallskip

\textbf{Конструкция:} <имя> <EQU> <значение>\smallskip

\textbf{Пример:}
(CONST EQU 34h)\bigskip

\textbf{Прямая адресация} (адрес операнда прямо в команде записывается):\smallskip

\includegraphics[width=120mm]{2_6.png}

Прямая адресация может быть записана с помощью символического имени,
которому предварительно был присвоен некоторый адрес оперативной памяти,
а присвоен может быть с помощью директивы. \smallskip

\includegraphics[width=120mm]{2_7.png}
\smallskip

\textbf{Косвенно"=ресгистровая операция} (в регистре содержится адрес операнда),
в записи косвенно"=регистровая от регистровой отличается записью регистра в
квадратных скобках. \smallskip

\includegraphics[width=100mm]{2_8.png}

\textbf{Адресация по базе со смещением:} \smallskip

\includegraphics[width=80mm]{2_9.png}\smallskip

\textbf{BP работает с сегментом стека.}\bigskip

\textbf{Прямая с индексированием адресация:}\smallskip

\includegraphics[width=90mm]{2_10.png}

С помощью этой адресации работают с одномерными массивами или с полями
структур, символическое имя определяет адрес начала массива или структуры,
а содержимое SI используется для перехода от одного элемента массива к другому
или от одного поля структуры к другому. \bigskip

\textbf{С двумерными массивами используется} адресация по базе с индексированием.

\includegraphics[width=100mm]{2_11.png}

Символическое имя определяет адрес начала массива, с помощью индексного
регистра реализуется переход от одного элемента к другому (в строке), а с
помощью базового регистра от одной строке к другой.