Различные формы адресации:

Команды изменяют значения флажков.
(фото)


Умножение и деление:

Умножение для беззнаковых чисел
(фото)

умножение знаковых чисел
(фото)

в варианте 3-х адресной команды:
OP1 - всегда регистр, OP2 - может быть данные, регистры или память, OP3 - всегда данные, но не
BYTE

1) При умножении результат может иметь удвоенный формат по отношению к сомножетелю. Иногда
мы точно знаем, что результат точно умещается в формат сомножителей и тогда мы его смело извлекаем
ил аккумулятора AL, AX или EAX. Но если мы не знаем каким будет результат, нужно посмотреть на
значения флажков OF и CF, если эти флажки равны 1, значит результат больше, чем сомножители,
если OF и CF равны 0, то можно извлекать.

Примеры: (фото)

Деление беззнаковых чисел - DIV OP2 (OP2 - регистр или память)

Деление знаковых чисел - IDIV OP2 (фото)

Содержимое аакумулятора AX или AX:DX или EAX:EDX делится на указанный операнд и результат
записывается в AL или AX или EAX, в зависимости от типа результат. Остаток помещается в 
AH, DX или EDX.

Значение флагов при делении не меняются, но могут быть ошибки деления на 0 или переполнение.

Пример: (фото)

При выполнении команд умножения и деления необходимо следить за размером операндов и при необходимости
за значениями флажков сдвига и переполнения.

Посмотрим фрагмент программы, в котором цифры целого беззнакового байтового числа N записывают
в байты памяти, начиная с индекса D как символы. (фото)

Заголовок Директивы внешних ссылок

Директивы внешних ссылок позволяют организовать связь между различными модулями, расположенными 
на диске, и между различными файлами.

Пример: Public <имя>,[<имя>]

Эта директива определяет указанные имена как глобальные величины к которым можно обращаться
из дргого модуля.

Именем может быть метка или переменная. 

Если некоторое имя определено в модуле А как глобальное, а к нему нужно обращаться из других модулей,
например B и C, то в этих модулях B и C, должна быть деректива EXTRN <имя>:<тип> (можно несколько)

Имя одно и тоже, что написано в дерективе Public, а тип зависит от значения имени, если 
имя это имя переменной, то на месте слова тип может стоять одно из ключевых слов (BYTE, WORD, DWORD,
FWORD, QWORD, TWORD), если имя это метка, то типом может быть NEAR или FAR.

Директива EXTRN говорит, что эти имена являются внешними для данного модуля.

Пример:(фото)

Директива INCLUDE позволяет подключить на этапе ассемблирования файлы, расположенные на диске,
например: INCLUDE <имя файла> + (фото)

На этапе ассемблирования содержимое этого файла запишется на место этой директивы.

Закголовок Команды управления

Команды управления управляют кодом вычислительного процесса. Кним относятся команды условной
передачи управления, безусловной передачи управления и команды организации управления.

Команды безусловной передачи управления (фото)

Имя - метка команды, которая будет выполняться следующей за JMP, команда, на которую передаём
управление, может располагаться в том же кодов сегменте, что и JMP, а может и в другом кодовом
сегменте.

Пример: (фото)

Если метка содержится в другом кодовом сегменте, то в том сегменте, куда передаём управление, должна 
быть деректива Public M1, а в сегменте с JMP должна быть деректива ETRN M1: FAR

Передачи бываю прямыми или косвенными, можно использовать прямую (JMP M1) и косвенную (JMP [BX])
адресацию.

Команда безусловной пердачи управления на ближнюю метку занимает в памяти 3 байта, передача на дальнюю
метку занимает 5 байтов памяти. Если мы знаем, что передаём управление не далее чем на -128 или 127
байтов, то можно использовать команду занимающую 1 байт памяти.

вид (фото)

За командой JMP должна следовать команда с меткой (обязательно, чтобы можно было вернуться к
команде, следующей за JMP)

К командам безусловной передачи управления относятся команды обращения к подпрограмам и возврата
из подпрограммы. 

Процедура обязательно имеет тип NEAR или FAR, последний нужно указывать обязательно.

NEAR может быть вызвана только из того модуля в котором содержится. Основная или головная программа
всегда имеет тип FAR, поскольку к ней обращается из отладчика. Если подпрограмм немного, то 
их размещают в том же сегменте, что и основная программа, а если их много, то для них выделяют отдельный
кодовый сегмент.

Пример: (фото)

Команда CALL <имя>, которая может использовать как прямую адресацию, так и косвенную. При обращении
к подпрограмме в стеке сохраняется адрес возврата, то есть адресс команды, следующей за командой CALL,
но если мы обращается к подпрограмме ближнего типа, то в стеке сохраняется только смещение, а если к внешней
поцедуре, к подпрограмме, кодержащейся в другом кодовом сегменте, то в стек записывается полный адресс
(начало сегмента и смещение относительного него).

Команда возврата RET может использоваться в одном из 3-ч видов (фото)
Команда RET может реализовать выход из подпрограммы как NEAR, так и FAR

RETN - из подпрограммы ближнего типа вызова

RETF - из подпрограммы дальнего типа вызова

Параметр n необязательный, он говорит сколько надо байтов в стеке нужно очистить

Пример: (фото)

Заголовок Команды условной передачи управления

Команды условной пердачи управления делят на 4 типа:

1) команды используемые после команд сравнения

2) команды используемые после команд отличных от команд сравнения

3) команды сравнения, но реагирующие на значения флагов

4) команды, реагирующие на значение регистра CX

Общий вид объявления Jx <метка> (J - всегда первая, а затем следует несколько букв),
метка в этой команде имеет право отстоять не более чем на 127 байтов.

Например: (фото)

(фото)

Если нужно реализовать условную передачу управления больше чем на 127 байт, то можно изменить условие
передачи управления (фото)

С помощью команд условной передачи и безусловной можно оргранизовать циклы с предусловием и
постусловием (фото)

