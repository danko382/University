Заголовок стуктуры в ассемблере

Структуры - комбинированный тип, содержащий данные различного типа,
занимающие последовательнные поля памяти.
(109 тип)

Чтобы использовать переменную структурного типа, нужно описать
структуры (шаблон структуры), на основании которого место в
памяти при ассемблировании не выделяется, а для транслятора
только информамция о формате структуры. Это описание
структуры выглядит следующим образом:

<имя типа> struct

    описание полей

<имя типа> ends    

Для описания полей используется директивы определения данных и
памяти (byte, word, DW), а имена указанные в этих директивах
и будут именами полей.

Имена полей в директивах по стандарту считаются уникальными в
рамках программы, и ещё по стандарту не допускаются вложные структуры.

Например (слайд 110):

? - означает, что значения по умолчанию нет.

Имена полей - имена в директивах, а значения называются значениями,
принятыми по умолчанию. 

Расположение данных (слайд 110)

(слайд 111) Описание переменных:

уголки - не метасимволы, а реальные символы языка,
внутри которых через запятую указываются начальные значения полей.

(слайд 111) значения полей + пример

Приоритетными значениями являются начальные значения.
Если при описании переменной значением поля является ?, или
какое-то другое значение, то значение полей по умолчанию игнорируется.
Пример (слайд 112)

Если при описании переменной используется значение пусто, то 
в качестве начального значения принимается значение по умолчанию.

Значение по умолчанию устанавливается для тех полей, которые являются
одинаковыми для нескольких переменных, например, для массива структур.

Если отсутствует начальное значение, нескольких полей при описании
переменных и эти поля являются последними в описании, то запятые
при описании можно не ставить.

пример (слайд 113)

Если нет совсем начальных значений у переменной, то нужно оставлять
пустые угловые скобки 

пример (слайд 113)

Можно писать за 1 раз несколько переменных, а можно писать
массив структур, используя конструкцию DUP

пример (слайд 113)

Описан одномерный массив структур типа TData, в котором
первый элемент массива имеет начальное значение 2000, 4, 1, а
остальные элементы массива в качестве начальных получают
значения, принятые по умолчанию.

Имя и адрес первой структуры dst, второй - dst+4, третьей dst+8,...,
это начало первого элемента ствуктуры.

Обращасться к полям можно также как и в языках высокого уровня:

пример + шаблон(слайд 114)

Ассемблер имени типа структуры и имени переменной 
структурного типа присваивает тип, определяющий размер структуры (количество
байт, занимаемых стурктурой)

пример (слайд 114)

И тогда эту информацию можно использовать при программировании, то 
есть скопировать значение полей из одной структуры в другую

пример (слайд 114)

Из памяти в память пересылать нельзя.

пример (слайд 114)

Точка, при обращении к полю структуры, это оператор, который позволяет
вычислить адрес поля по формуле

формула (слайд 115)

Тип полученного адреса, свпадает с типом поля, т.е.

(слайд 115)

Смещение поля в стуктуре - это имя поля, а адресное выражение
может быть любой сложности

пример + замечания(слайд)

Если при описании типа стуктуры, при описании некоторого поля,
используется несколько параметров или конструкция повторения DUP,
то при описании переменной этого типа, у данного поля не должно
быть начального значения, может быть только пустым, но есть одно 
исключение: если по умолчанию зачением поля является строка, то 
у этого поля по этой переменной, то при описании переменной у этого поля
может быть начальное значение, но размером не больше, чем строка по 
умолчанию, если окажется меньше, то справа это поле дополнится 
пробелами.

пример (слайд)

пример (используем прямое обращение к полям)(следующий слайд +
следующий слайд)

пример (обращение к полям структуры в цикле)(слайд)

пример (обращение к полям стурктур цикл в цикле)(слайд +
следующий слайд + следующий слайд)

Заголовок Записи в ассемблере

Записи в ассемблере это упакованные данные. Это данные, которые
занимают нецелые байты или слова, а части байтов или слов, т.е.
запись в ассемблере может занимать 1 байт или 2 байта, то есть слово,
а поля записи занимают последовательные биты в байте или слове.

Поля должны быть прижаты к правой границе записи, прижаты к правой
границе поля и между ними не должно быть неопределённых разрядов, размер
записи может быть только байтом или словом, размер поля записи 
может быть любым, но так, чтобы в сумме размеры полей не превышали
байта или слова. Если сумма размеров полей, меньше байта или слова,
то старшие разряды этого байта или слова заполняются нулями, но никакого
отношения к записи не имеют.

Поля, так же как и у структуры, имеют собственные имена, но 
обращаться к ним напрямую нельзя, так как это несколько разрядов,
а наименьший адресуемый элемент для процессора это байт.
Так же как и для структуры, должно быть описание типа записи (шаблон),
на основание которого не выделяется место, это описание может
располагаться в любом месте программы, но до первого описание переменной
такого типа.

пример (слайд)

Поле по определению есть

(слайд)

Размер и выражение - это константные выражения. Размер определяет размер
поля в битах (сколько разрядов занято полем), а выражение, если оно есть,
определяет значение поля по умолчанию, но в отличие от структуры, знак
вопроса не допускается

пример (слайд)

Используя идентефикатора типа опишем переменные следующего типа

пример (слайд)

Угловые значения - это символы языка, внутри которых через запятую
записываются начальные значения, а начальным значением может быть
константное выражение, знак вопроса или пусто, в отличие от структуры
знак вопроса определяет нулевое начальное значениея, а начальное Значение
пусто приведёт к тому, что у поля будет значение, принятое по умолчанию 

пример (слайд)

С запятыми можно поступить так же как и у структуры: если они 
последнии, то можно их не писать, если значений нет, то можно тоже
не писать.

пример (слайд)

массив записей (слайд)

Все 100 записей будут иметь значение, принятые по умолчанию.

пример (слайд)

Можно присвоиь поля записи одной записи другой, тогда мы пользуемся
конструкцией

пример (слайд)

Для работы с полями есть специальные операторы width и mask

(слайд)

оператор width определяет размер в битах указанного операнда,
это будет размер поля или размер всей записи.

оператор mask определяет маску

(слайд)

результатом будет маска, в котором разряды оператора заполняются 1,
а все остальные 0

пример (слайд)

пример (выявить родившихся первого числа)(слайд)