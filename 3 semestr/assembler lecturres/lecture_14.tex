Файловая система имеет иерархическую структуру.

Функция поиска файлов работает только в текущей директории, а функция
создания и удаления файлов не применяются для директорий, хотя на
низком уровне директория - это тоже файл, который может содержать в себе
файлы, имена других директорий, их атрибуты. (где-то в 3 файле)

Для работы с директориями ест другие функции. Например, созадать директорию
- 39h (слайд)

В результате, если CF = 0, то всё в порядке - директория создана, если
CF = 1, значит есть ошибка (или нет доступа AX = 5 или не найден путь
AX = 3)

Удалить директорию 3Ah (загружаем в регистр AH и также в DS DX адрес ASCIIZ
сторки, в котором будет содержаться путь, в котором последняя функция
будет удалена, но она должна быть пустой и не должна быть текущей).
Если CF = 0, то функция выполнилась верно, если CF = 1 - ошибка
(AX = 3 - не найден путь, AX = 5 - запрещён доступ, AX = 10h -
попытка удаления текущей директории).

Определить текущую директорию - 47h заносим в AH, а в CL номер диска.
(слайд) В DS:DX должен находиться адрес 64 байтного буфера, в который
запишется текущий путь, он запишется в виде ASCIIZ строки без имени диска
и без первого и без последнего \ символа. Если CF = 0 - нет ошибок
и в AX = 0100h, CF = 1 - есть ошибки в AX = 0Fh.

Изменить текущую директорию 3Bh - загружаем её в AH, а DS:DX загружаем
адрес ASCIIZ строки с путём и который станет текущей директорией.
CF = 0 - ошибок нет, CF = 1 и AX = 3 - путь не найден.

Для работы с директориями, имеющими длинные имена функции отличаются 
тем, что перед номерами функции записывается две цифры 71 и записываем 
номера функций не в AH, а в AX.

Пример Шифрование файлов:

Алгоритм:

1) инициализация регистра сегмента данных.

2) вывод на экран приглашения ввести имя файла.

3) ввод имени файла.

4) вывод на экран приглашения ввести пароль.

5) ввод пароля.

6) получение ключа пароля.

7) открытие файла.

8) чтение файла и запись его содержимого в буфер.

9) шифрование содержимого буфера.

10) запись содержимого буфера в файл.

11) закрытие файла и конец программы.

Предположим, что шифр состоит не более 80 символов. Ключ шифра - его 
контрольная сумма (сумма байтов шифра). Процесс созадния ключа шифра -
хэширование, а сам процесс хэш образ.

(слайд + следующий слайд + ещё 1 слайд + ещё 1 слайд + ещё 1 слайд +
ещё 1 слайд) 

Здесь доллар- в данном случае - это предопределённая метка,
значением которой является текущий адрес. Если от текущего адреса
отнять адрес начала предыдущей строки, то мы получим длину строки.

Вывод информации на экран в текстовом режиме возможе 4 способами:

1) Использовав функцию работы с файлами 40h для прерывания int 21h.

2) Используя специальные функции вывода.

3) Обращаясь к функциям экрана двайвера (слайд)

4) Прямая запись в видеобуфер.

1:

Вывод символа на экран в текущую позицию курсора -02h, с проверкой на 
cntrl/break.

Вызов: AH = 02h, DL = ASCII код выводимого символа.

Вывод: (слайд)

Реакция на cntrl/break - при одновременном нажатии этих клавиш, вы 
выходите из программы. (во время функции 02h). Кроме того,
эта функция 02 обрабатывает некоторые управляющие символы:
(слайд)

Вывод символа на экран в текущую позицию, без проверки на cntrl/break
и без работы с управляющими символами - 06h (всё остальное как в 02h).

Вывод строки на экран с проверкой на cntrl/break - 09h.
Вызов со слайда.

Пример (вывод на экран всех ASCII символов в формате 16 строк по 16
символов)

(слайд)

ОС использует экран как стандартное устройство вывода, следовательно,
можно перенаправить вывод вместо экрана в файл. В программе написали
вывод на экран, а запуск программы сделали следующим образом (слайд)
Будет созадн файл с названием () в текущей директории, которым
окажется результат выполнения вызванной программы.

Функция 09h выводит на экран строку до символа доллар, строку с долларом
нельзя вывести на экран с помощью функции 09h, но можно вывести
строку, содержащую доллар с помощью функции работы с файлами,
записав в регистр BX (слайд). Но в этом случае нельзя перенаправить
результат работы в файл.

Пример программы, демонстрирующий вывод на экран с помощью
функции для работы с файлами 40h:

(слайд)